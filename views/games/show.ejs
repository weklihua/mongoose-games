<%- include('../partials/header') %>

<!-- <section id="show-page">
    <div>Title: </div>
    <div><%= game.title %></div>
    <div>Release Date: </div>
    <div><%= game.releaseDate.toLocaleString('en-us', {year: 'numeric', month: '2-digit', day: '2-digit'}).replace(/(\d+)\/(\d+)\/(\d+)/, '$3-$1-$2') %></div>
    <div>No. of Players: </div>
    <div><%= game.numPlayers %></div>
    <div>Genre: </div>
    <div><%= game.genre %></div>
    <div>Publisher: </div>
    <div><%= game.publisher %></div>
    <div>Supported Language: </div>
    <div><%= game.supportedLanguage %></div>
    <div>Description: </div>
    <div><%= game.description %></div> -->

    <div class="container" >
        <div class="row align-items-center">
          <div class="col-sm">
            Title:
          </div>
          <div class="col-sm">
            <%= game.title %>
          </div>
        </div>
        <div class="row">
            <div class="col-sm">
                Release Date:
            </div>
            <div class="col-sm">
              <%= game.releaseDate.toLocaleString('en-us', {year: 'numeric', month: '2-digit', day: '2-digit'}).replace(/(\d+)\/(\d+)\/(\d+)/, '$3-$1-$2') %>
            </div>
          </div>
          <div class="row">
            <div class="col-sm">
                No. of Players:
            </div>
            <div class="col-sm">
                <%= game.numPlayers %>
            </div>
          </div>
          <div class="row">
            <div class="col-sm">
                Genre:
            </div>
            <div class="col-sm">
                <%= game.genre %>
            </div>
          </div>
          <div class="row">
            <div class="col-sm">
                Publisher:
            </div>
            <div class="col-sm">
                <%= game.publisher %>
            </div>
          </div>
          <div class="row">
            <div class="col-sm">
                Supported Language:
            </div>
            <div class="col-sm">
                <%= game.supportedLanguage %>
            </div>
          </div>
          <div class="row">
            <div class="col-sm">
                Description:
            </div>
            <div class="col-sm">
                <%= game.description %>
            </div>
          </div>

          
        <!-- add reviews -->

          <br><br><h2 style="text-align:center">Reviews</h2>
          <% if (game.reviews.length) { %>
            <% game.reviews.forEach(function(review) { %>
              <div class="row" >
                <div class="col-sm">

                <div class="toast show" role="alert" aria-live="assertive" aria-atomic="true">
                  <div class="toast-header">
                    <!-- <img src="..." class="rounded me-2" alt="..."> -->

                    <strong class="me-auto">Rating: <%= review.rating %>
                    </strong>
                    <small><%= game.createdAt.toLocaleDateString()%>&nbsp&nbsp</small>
                    <!-- <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button> -->
                  </div>
                  <div class="toast-body">
                    <%= review.content %>
                    <div class="mt-2 pt-2 border-top">

                      <button type="button" class="btn btn-info btn-sm"><a href="/reviews/<%=review.id %>/edit">EDIT</a></button> 

                      <form action="/reviews/<%= review._id %>?_method=DELETE" method="POST" style="display: inline-block">
                      <button type="submit" class="btn btn-danger btn-sm" data-bs-dismiss="toast">DELETE</button>
                      </form>

                    </div>
                  </div>
                </div>
                <% }); %>
              </div>
            </div>
            </div>
              <% } else { %>
                <h5>No Reviews Yet</h5>
              <% } %>

          <!-- add review form -->
          <div class="row">
            <div class="col-sm">
              <br><br><h2 style="text-align:center">Add a Review</h2>
              <form id="add-review-form" method="POST" action="/games/<%= game._id %>/reviews">

              <label><span>Rating:</label>
              <select name="rating">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5" selected>5</option>
              </select>
                <div class="form-group">
                  <label for="exampleFormControlTextarea1">Comment:</label>
                  <textarea class="form-control" id="exampleFormControlTextarea1" rows="3" name="content"></textarea>
                </div>
                <div>  <input type="submit" value="Add Review">
                </div>
              </form>

            </div>
            
          </div>
      </div>

      <!-- <script src="../public/javascripts/rate.js"></script> -->

<%- include('../partials/footer') %>
